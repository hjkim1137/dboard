<div class="nav">
  <div>
    <a href="/list/total" class="navLeft"><img src="/homelogo.png" class="logo"><span class="serviceName">Dboard</span></a>
  </div>

  <% if(currentUser) { %>
  <div class="profileBox">
    <button class="toggle">ë‹¤í¬ëª¨ë“œë¡œ ğŸŒ™</button>
    <a href="/chat/list">ì±„íŒ…</a>

    <button class="profileInner">
      <% if(currentUser.img) { %>
         <div class="navProfile">
            <img src="<%= currentUser.img %>" class="userProfile">
         </div>
          <p><%= currentUser.username %></p>
      <% } else { %>
          <img class="navProfile" src="/profile.png"></img>
          <p><%= currentUser.username %></p>
      <% } %>
    </button>
      <ul class="userDropdown">
        <li><a href="/mypage">ë§ˆì´í˜ì´ì§€</a></li> 
        <li><a href="/mypost">ì‘ì„±í•œ ê¸€</a></li> 
        <li><a href="/logout">ë¡œê·¸ì•„ì›ƒ</a></li> 
      </ul>
  </div>

  <% } else { %>
    <div class="profileBox">
      <button class="toggle">ë‹¤í¬ëª¨ë“œë¡œ ğŸŒ™</button>
      <a href="/login" class="navLoginRegister"><div>ë¡œê·¸ì¸</div></a>
      <a href="/register" class="navLoginRegister"><div>íšŒì›ê°€ì…</div></a>
    </div>
  <% } %> 
</div>

<script>
// ìœ ì € ë“œë¡­ë‹¤ìš´ í† ê¸€
let dropdown = document.querySelector(".userDropdown")
let profile = document.querySelector(".profileInner")

if(profile) {
  profile.addEventListener("click", ()=> {
  dropdown.classList.toggle("active")
})

}
</script>

<script>
// ë‹¤í¬ëª¨ë“œ ê´€ë ¨
let mode = localStorage.getItem('mode');
let toggle = document.querySelector('.toggle');
let body = document.querySelector('body');
let navIcons = document.querySelectorAll(".navIcon")

// í™”ë©´ ì´ë™ì‹œì—ë„ ë‹¤í¬ëª¨ë“œ ìœ ì§€
if (mode === 'dark') {
  toggle.innerHTML = 'ì¼ë°˜ëª¨ë“œë¡œ â˜€ï¸';
  body.classList.remove('grey-bg');
  body.classList.add('dark-mode');
} else {
  toggle.innerHTML = 'ë‹¤í¬ëª¨ë“œë¡œ ğŸŒ™';
  body.classList.remove('dark-mode');
}

// ë‹¤í¬ëª¨ë“œ ë²„íŠ¼ ëˆŒë €ì„ ë•Œ
toggle.addEventListener('click', function () {
  if (body.classList.contains('dark-mode')) {
    localStorage.removeItem('mode', 'dark');
    toggle.innerHTML = 'ë‹¤í¬ëª¨ë“œë¡œ ğŸŒ™';
    body.classList.remove('dark-mode');


  } else {
    localStorage.setItem('mode', 'dark');
    toggle.innerHTML = 'ì¼ë°˜ëª¨ë“œë¡œ â˜€ï¸';
    body.classList.remove('grey-bg');
    body.classList.add('dark-mode');
  }
});
</script>
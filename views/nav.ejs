<div class="nav">
  <a class="logo" href="/">Home</a>
  <a href="/list">List</a>
  <a href="/write">Write</a>
  <a href="/mypage">Mypage</a>
  <a href="/chat/list">Chat</a>
  

  <% if(currentUser) { %>
  <div class="profileBox">
    <button class="toggle">ë‹¤í¬ëª¨ë“œë¡œ ğŸŒ™</button>
    <a href="/logout" class="logout">Logout</a>

    <button class="profileInner" onclick="location.href='/mypage'">
      <% if(currentUser.img) { %>
         <img class="navProfile" src="<%= currentUser.img %>"></img>
          <p><strong><%= currentUser.username %></strong></p>

      <% } else { %>
          <img class="navProfile"></img>
          <p><strong><%= currentUser.username %></strong></p>
      <% } %>
    </button>
  </div>

  <% } else { %>
    <div class="profileBox">
      <button class="toggle">ë‹¤í¬ëª¨ë“œë¡œ ğŸŒ™</button>
      <a href="/login">Login</a>
      <a href="/register">Register</a>
    </div>
  <% } %>

  
  <script>
    // ë‹¤í¬ëª¨ë“œ ì ìš©
    let toggle = document.querySelector('.toggle')
    let body = document.querySelector('body')

    toggle.addEventListener('click', function () {
      if (body.classList.contains('dark-mode')) {
        localStorage.removeItem("mode", "dark")
        toggle.innerHTML ="ë‹¤í¬ëª¨ë“œë¡œ ğŸŒ™"
        body.classList.remove('dark-mode');
      } else {
        localStorage.setItem("mode", "dark")
        toggle.innerHTML ="ì¼ë°˜ëª¨ë“œë¡œ â˜€ï¸"
        body.classList.remove('grey-bg');
        body.classList.add('dark-mode');
      }
    });

    // ë‹¤í¬ëª¨ë“œ ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸°
    let mode = localStorage.getItem("mode")
    document.addEventListener("DOMContentLoaded", ()=> {
      if(mode === "dark") {
        toggle.innerHTML ="ì¼ë°˜ëª¨ë“œë¡œ â˜€ï¸"
        body.classList.remove('grey-bg');
        body.classList.add('dark-mode');
      } else {
        toggle.innerHTML ="ë‹¤í¬ëª¨ë“œë¡œ ğŸŒ™"
        body.classList.remove('dark-mode');
      }
    })
  </script>
</div>

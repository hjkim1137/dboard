<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Myboard</title>
    <link href="/main.css" rel="stylesheet" />
  </head>
  <body class="grey-bg">
    <%- include('nav.ejs')%>

    <div class="wholeWrapper">
      <!-- 검색기능 -->
      <div class="searchBox">
        <input class="search" placeholder="게시글을 검색하세요." />
        <button class="searchBtn">검색하기</button>
      </div>

      <script>
        document
          .querySelector('.searchBtn')
          .addEventListener('click', function () {
            let userInput = document.querySelector('.search').value;
            location.href = '/search?keyword=' + userInput;
          });
      </script>

      <div class="result">검색결과</div>

      <div class="white-bg">
        <% if(boardPosts.length >0) { %> <% for(let i=0; i<boardPosts.length;i++) { %>
        <div class="list-box">
          <h4>
            <div class="editNdelete">
              <a href="/detail/<%=boardPosts[i]._id%>"><%=boardPosts[i].title %></a>
              <a href="/edit/<%=boardPosts[i]._id %>">✏️ 수정</a>
              <span
                class="delete"
                data-id="<%=boardPosts[i]._id %>"
                data-userID="<%=boardPosts[i].user %>"
                >🗑️ 삭제</span
              >
            </div>
          </h4>
          <p><%=boardPosts[i].content %></p>
        </div>

        <!-- 왜인지 if-else가 안되어 if, if 사용 -->
        <% } %> <% } %> <% if(boardPosts.length == 0) { %>
        <div class="searched">
          <div>검색결과가 없습니다.</div>
        </div>
        <% } %>
      </div>

      <!-- 페이지네이션 만들기-->
      <div class="pages">
        <a href="/search/1" id="page">1</a>
        <a href="/search/2" id="page">2</a>
        <a href="/search/3" id="page">3</a>
        <a href="/search/4" id="page">4</a>
      </div>
    </div>
    <%- include('footer.ejs')%>
  </body>
</html>
